<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ëë§ì‡ê¸°</title>
  <style>
      #number{
          color: red;
      }
  </style>
</head>

<body>
  <div>ì°¸ê°€ì: <span id="number"></span>ëª…</div>
  <div>í˜„ì¬ ì œì‹œì–´: <span id="word"></span></div>
  <div><span id="order"></span>ë²ˆì§¸ ì°¸ê°€ìë‹˜ ì…ë ¥í•˜ì„¸ìš”â†“</div>
  <input type="text">
  <button>ì…ë ¥</button>
  <script>
    const number = parseInt(prompt('ëª‡ ëª…ì´ ì°¸ê°€í•˜ë‚˜ìš”?'));
    const $number = document.querySelector('#number');
    const $button = document.querySelector('button');
    const $input = document.querySelector('input');
    const $word = document.querySelector('#word');
    const $order = document.querySelector('#order');
    let word;//ì œì‹œì–´ë¥¼ ë‹´ì„ ë³€ìˆ˜
    let newWord;//ìƒˆë¡œ ì…ë ¥ëœ në²ˆì§¸ ì œì‹œì–´

    if(number < 1){
        alert('1ì´ìƒì˜ ì¸ì›ì„ ì…ë ¥í•´ì£¼ì„¸ìš”ğŸ˜©');
        $number.textContent = number;
    } 

    $number.textContent = number;
    $order.textContent = 1;

    const onClickButton = () => {
        if(!word){//ì œì‹œì–´ê°€ ë¹„ì–´ ìˆë‹¤
            word = newWord;//ì…ë ¥í•œ ì œì‹œì–´(newWord)ë¥¼ ì œì‹œì–´(word)ì— ë“±ë¡
            $word.textContent = word;//â†‘ìœ„ ë‚´ìš©ì„ í™”ë©´ì—ë„ ì¶”ê°€í•´ì„œ ë³´ì—¬ì£¼ê¸°
            $input.value = "";//ì…ë ¥í•˜ê³  ë‚˜ë©´ ì œì‹œì–´ ì§€ì›Œì£¼ê¸° => ë‹¤ìŒ ì œì‹œì–´ë¥¼ ë°›ê¸° í¸í•˜ê²Œ
            const currentOrder = parseInt($order.textContent);
            if(currentOrder+1 > number){//í˜„ì¬ ìˆœì„œ +1ì´ numberê°’(ì´ì¸ì›)ë³´ë‹¤ í°ê°€? or í˜„ì¬ ìˆœì„œ == ì´ ì¸ì›ìˆ˜?
                //1ë²ˆ ì°¨ë¡€ë¡œ ëŒì•„ê°
                $order.textContent = 1;
            } else{
                //ë‹¤ìŒ ì°¨ë¡€ë¡œ, (n+1)
                $order.textContent = currentOrder+1;

            }
        } else {//ì œì‹œì–´ê°€ ì•ˆ ë¹„ì–´ ìˆë‹¤
            if(word[word.length -1] === newWord[0]){//ì˜¬ë°”ë¥¸ê°€(word ë¬¸ìì—´ ë§ˆì§€ë§‰ ë‹¨ì–´ == newWord ë¬¸ìì—´ ì²« ë‹¨ì–´ )
                word = newWord;
                $word.textContent = word;
                $input.value = "";
                const currentOrder = parseInt($order.textContent);
                if(currentOrder+1 > number){//í˜„ì¬ ìˆœì„œ +1ì´ numberê°’(ì´ì¸ì›)ë³´ë‹¤ í°ê°€? or í˜„ì¬ ìˆœì„œ == ì´ ì¸ì›ìˆ˜?
                    //1ë²ˆ ì°¨ë¡€ë¡œ ëŒì•„ê°
                    $order.textContent = 1;
                } else{
                    //ë‹¤ìŒ ì°¨ë¡€ë¡œ, (n+1)
                    $order.textContent = currentOrder+1;
            }
            } else{//ì˜¬ë°”ë¥´ì§€ ì•Šì€ê°€
                alert('ì˜¬ë°”ë¥´ì§€ ì•Šì€ ë‹¨ì–´ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ ì£¼ì„¸ìš”!');
                $input.value = "";
            }
        }
    };
    const onInput = (event) => {
        newWord = event.target.value;
    };

    $button.addEventListener('click', onClickButton);
    $input.addEventListener('input', onInput);
  </script>
</body>
</html>